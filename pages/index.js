import Head from "next/head";
import { BsFillMoonStarsFill } from "react-icons/bs";
import { AiFillLinkedin, AiFillGithub } from "react-icons/ai";
import Image from "next/image";
import Link from "next/link";
import pfp from "../public/pfp.png";
import project1 from "../public/project1.png";
import project2 from "../public/project2.png";
import project3 from "../public/project3.png";
import project4 from "../public/project4.png";
import React, { useState } from "react";
import { FormErrorMessage, Textarea, Text, useToast } from "@chakra-ui/react";
import {
  Container,
  FormControl,
  FormLabel,
  Heading,
  Button,
} from "@chakra-ui/react";
import { Input } from "@chakra-ui/react";
import { sendContactForm } from "@/lib/api";

const initValues = {
  name: "",
  email: "",
  subject: "",
  message: "",
};

const initState = { values: initValues };

export default function Home() {
  const [darkMode, setDarkMode] = useState(false);

  const toast = useToast();

  const [state, setState] = useState(initState);

  const [touched, setTouched] = useState({});

  const { values, isLoading, error } = state;

  const onBlur = ({ target }) =>
    setTouched((prev) => ({ ...prev, [target.name]: true }));

  const handleChange = ({ target }) =>
    setState((prev) => ({
      ...prev,
      values: {
        ...prev.values,
        [target.name]: target.value,
      },
    }));

  const onSubmit = async () => {
    setState((prev) => ({
      ...prev,
      isLoading: true,
    }));
    try {
      await sendContactForm(values);
      setTouched({});
      setState(initState);
      toast({
        title: "Message Sent!",
        status: "success",
        duration: 2000,
        position: "top",
      });
    } catch (error) {
      setState((prev) => ({
        ...prev,
        isLoading: false,
        error: error.message,
      }));
    }
  };

  return (
    <div className={darkMode ? "dark" : ""}>
      <Head>
        <title>Kiko Nunez Portfolio</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <main className="bg-white px=10 md:px-3 dark:text-teal-300 dark:bg-blue-900 text-blue-900 scroll-smooth">
        <section id="home" className=" min-h-screen scroll-smooth">
          <nav className="py-5 px-3 mt-0 flex justify-between">
            <ul className="text-2xl font-burtons mt-0 pl-3">
              <Link href="#home">
                <li className="list-none flex hover:border-blue-600 hover:transform hover:scale-150 hover:transition hover:duration-500">
                  Home
                </li>
              </Link>
              <Link href="#projects">
                <li className="list-none flex hover:transform hover:scale-150 hover:transition hover:duration-500">
                  Projects
                </li>
              </Link>
              <Link href="#about-me">
                <li className="list-none flex hover:transform hover:scale-150 hover:transition hover:duration-500">
                  About Me
                </li>
              </Link>
              <Link href="#contact">
                <li className="list-none flex hover:transform hover:scale-150 hover:transition hover:duration-500">
                  Contact
                </li>
              </Link>
            </ul>
            <ul className="list-none flex items-center">
              <li>
                <BsFillMoonStarsFill
                  onClick={() => setDarkMode(!darkMode)}
                  className="cursor-pointer text-2xl"
                />
              </li>
              <li>
                <a
                  href="https://docs.google.com/document/d/1VIAWUF5wH1xBC-_EYzWocU_qi_4Ao64o/edit?usp=sharing&ouid=101142090938268679220&rtpof=true&sd=true"
                  target="_blank"
                  rel="noreferrer"
                  className="bg-gradient-to-r from-cyan-500 to-teal-500 text-white px-4 py-2 rounded-lg ml-8 mr-3"
                >
                  {" "}
                  Resume{" "}
                </a>
              </li>
            </ul>
          </nav>
          <div className="text-center p-0">
            <h2 className="text-5xl py-0 text-blue-900 dark:text-teal-300 font-burtons font-extrabold md:text-6xl">
              Kiko Nunez
            </h2>
            <h3 className="text-2xl py-2 md:text-3xl">Software Developer</h3>
            <p className="text-md py-5 leading-8 text-white-800 md:text-xl max-w-xl mx-auto">
              Full-Stack developer providing services. Join me down below!
            </p>
          </div>
          <div className="text-5xl flex justify-center gap-16 py-3">
            <a
              href="https://linkedin.com/in/kiko-nunez"
              className="hover:transform hover:scale-150"
              target="_blank"
              rel="noreferrer"
            >
              <AiFillLinkedin />
            </a>
            <a
              href="https://github.com/kiko-nunez"
              className="hover:transform hover:scale-150"
              target="_blank"
              rel="noreferrer"
            >
              <AiFillGithub />
            </a>
          </div>
          <div className="relative mx-auto bg-gradient-to-b from-teal-500 rounded-full w-60 h-60 mt-20 overflow-hidden">
            <Image alt="" src={pfp} layout="fill" />
          </div>
        </section>
        <section id="about-me" className="font-burtons">
          <h2 className="text-center text-4xl py-1 mt-4 ">About Me</h2>
          <p className="text-center text-2xl font-burtons font-semibold shadow-lg mx-5">
            Welcome to my website! I&apos;m Kiko, a full-stack software
            developer and a sustainability enthusiast. With over five years of
            experience in the renewables industry, I&apos;m committed to
            developing digital tools that make a positive impact on the world.
            As a problem solver and a collaborator, I bring technical expertise
            and real-world experience to every project I work on.
          </p>
          <br></br>
        </section>
        <section id="projects">
          <h2 className="text-center text-4xl py-1 font-burtons">
            My Projects
          </h2>
          <div className="lg:flex gap-10 dark:text-blue-900">
            <div className="text-center shadow-lg p-10 rounded-xl my-10 flex-1 lg:flex-wrap basis-1/3 dark:bg-teal-200 hover:transform hover:scale-110 border-4 border-black">
              <h3 className="text-3xl py-1">Anime Quote Generator</h3>
              <p className="text-xl py-2 leading-8 text-white-800">
                <a
                  href="https://kiko-nunez.github.io/anime-quote-generator/"
                  target="_blank"
                  rel="noreferrer"
                >
                  <Image
                    alt=""
                    src={project1}
                    className="rounded-lg object-cover"
                    width={"100%"}
                    height={"100%"}
                  />
                </a>
              </p>
              <p class="py-1 relative text-center mt-3">
                <span className="absolute -top-5 left-1/2 transform -translate-x-1/2 font-bold">
                  Technologies:
                </span>
                HTML5, CSS2, JavaScript, jQuery, Anime Quote API
              </p>

              <p className="py-1">Description</p>
            </div>

            <div className="text-center shadow-lg p-10 rounded-xl my-10 flex-1 lg:flex-wrap basis-1/3  dark:bg-teal-200 hover:transform hover:scale-110 border-4 border-black">
              <h3 className="text-3xl py-1">Open Source Clothing</h3>
              <p className="text-xl py-2 leading-8 text-white-800">
                <a
                  href="https://open-source-apparel.herokuapp.com/"
                  target="_blank"
                  rel="noreferrer"
                >
                  <Image
                    alt=""
                    src={project2}
                    className="rounded-lg object-cover"
                    width={"100%"}
                    height={"100%"}
                  />
                </a>
              </p>
              <p class="py-1 relative text-center mt-3">
                <span className="absolute -top-5 left-1/2 transform -translate-x-1/2 font-bold">
                  Technologies:
                </span>
                HTML5, CSS2, JavaScript, Node.js, Express, Basic Authentication, MongoDB, Mongoose, Heroku
              </p>
              <p className="py-1">Description</p>
            </div>

            <div className="text-center shadow-lg p-10 rounded-xl my-10 basis-1/3 flex-1 dark:bg-teal-200 hover:transform hover:scale-110 border-4 border-black">
              <h3 className="text-3xl py-1">Cheezus Pizza</h3>
              <p className="text-xl py-2 leading-8 text-white-800">
                <a href="https://cheezus.netlify.app" target="_blank" rel="noreferrer">
                  <Image
                    alt=""
                    src={project3}
                    className="rounded-lg object-cover"
                    width={"100%"}
                    height={"100%"}
                  />
                </a>
              </p>
              <p class="py-1 relative text-center mt-3">
                <span className="absolute -top-5 left-1/2 transform -translate-x-1/2 font-bold">
                  Technologies:
                </span>
                HTML5, CSS2, JavaScript, Express, Express-Sessions, MongoDB, Mongoose, Heroku, Netlify
              </p>
              <p className="py-1">Description</p>
            </div>

            <div className="text-center shadow-lg p-10 rounded-xl my-10 flex-1 basis-1/3 dark:bg-teal-200 hover:transform hover:scale-110 border-4 border-black">
              <h3 className="text-3xl py-1">PowerUp: EV Charging</h3>
              <p className="text-xl py-2 leading-8 text-white-800">
                <a href="https://powerup.herokuapp.com/" target="_blank" rel="noreferrer">
                  <Image
                    alt=""
                    src={project4}
                    className="rounded-lg object-cover"
                    width={"100%"}
                    height={"100%"}
                  />
                </a>
              </p>
              <p class="py-1 relative text-center mt-3">
                <span className="absolute -top-5 left-1/2 transform -translate-x-1/2 font-bold">
                  Technologies:
                </span>
                HTML5, CSS2, JavaScript, Python, Django, PostgreSQL, Heroku, Materialize, Docker, Unit Testing
              </p>
              <p className="py-1">Description</p>
            </div>
          </div>
          <section id="contact">
            <div className="border-4 border-black">
              {/* <h2 className="text-center text-4xl py-1 mt-4 ">Contact</h2> */}
              <Container>
                <Heading className="text-center text-4xl mt-4">Contact</Heading>
                {error && (
                  <Text
                    className="text-center text-red-600 text-bold text-lg"
                    color="red.300"
                    my={4}
                    fontSize="xl"
                  >
                    {error}
                  </Text>
                )}
                <FormControl
                  isRequired
                  isInvalid={true}
                  className="max-w-lg mx-auto p-4"
                >
                  <FormLabel className="block text-white-700 font-bold mb-2">
                    Name
                  </FormLabel>
                  <Input
                    type="text"
                    name="name"
                    value={values.name}
                    errorBorderColor="red.300"
                    onChange={handleChange}
                    onBlur={onBlur}
                    className="appearance-none border-rounded w-full py-2 px-3 text-white-700 leading-tight focus:outline-none focus:shadow-outline"
                  />
                  <FormErrorMessage>Required</FormErrorMessage>
                </FormControl>

                <FormControl
                  isRequired
                  isInvalid={touched.email && !values.email}
                  className="max-w-lg mx-auto p-4"
                >
                  <FormLabel className="block text-white-700 font-bold mb-2">
                    Email
                  </FormLabel>
                  <Input
                    type="email"
                    name="email"
                    value={values.email}
                    onChange={handleChange}
                    onBlur={onBlur}
                    className="appearance-none border-rounded w-full py-2 px-3 text-white-700 leading-tight focus:outline-none focus:shadow-outline"
                  />
                  <FormErrorMessage>Required</FormErrorMessage>
                </FormControl>

                <FormControl
                  isRequired
                  isInvalid={touched.subject && !values.subject}
                  className="max-w-lg mx-auto p-4"
                >
                  <FormLabel className="block text-white-700 font-bold mb-2">
                    Subject
                  </FormLabel>
                  <Input
                    type="text"
                    name="subject"
                    value={values.subject}
                    onChange={handleChange}
                    onBlur={onBlur}
                    className="appearance-none border-rounded w-full py-2 px-3 text-white-700 leading-tight focus:outline-none focus:shadow-outline"
                  />
                  <FormErrorMessage>Required</FormErrorMessage>
                </FormControl>

                <FormControl
                  isRequired
                  isInvalid={touched.message && !values.message}
                  className="max-w-lg mx-auto p-4"
                >
                  <FormLabel className="block text-white-700 font-bold mb-2">
                    Message
                  </FormLabel>
                  <Textarea
                    type="text"
                    name="message"
                    rows={4}
                    value={values.message}
                    onChange={handleChange}
                    onBlur={onBlur}
                    className="appearance-none border-rounded w-full py-2 px-3 text-white-700 leading-tight focus:outline-none focus:shadow-outline"
                  />
                  <FormErrorMessage>Required</FormErrorMessage>
                </FormControl>

                <div className="flex items-center justify-center mb-5">
                  <Button
                    variant="outline"
                    colorScheme="blue"
                    isLoading={isLoading}
                    disabled={
                      !values.name ||
                      !values.email ||
                      !values.subject ||
                      !values.message
                    }
                    onClick={onSubmit}
                    className="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                  >
                    Submit
                  </Button>
                </div>
              </Container>
              {/* <form className="max-w-lg mx-auto p-4">
                <div className="mb-4">
                  <label
                    className="block text-white-700 font-bold mb-2"
                    htmlFor="name"
                  >
                    Name
                  </label>
                  <input
                    className="appearance-none border rounded w-full py-2 px-3 text-white-700 leading-tight focus:outline-none focus:shadow-outline"
                    id="name"
                    type="text"
                    placeholder="Enter your name"
                    name="fullname"
                  />
                </div>
                <div className="mb-4">
                  <label
                    className="block text-white-700 font-bold mb-2"
                    htmlFor="email"
                  >
                    Email
                  </label>
                  <input
                    className="appearance-none border rounded w-full py-2 px-3 text-white-700 leading-tight focus:outline-none focus:shadow-outline"
                    id="email"
                    type="email"
                    name="email"
                    placeholder="Enter your email address"
                  />
                </div>
                <div className="mb-4">
                  <label
                    className="block text-white-700 font-bold mb-2"
                    htmlFor="message"
                  >
                    Message
                  </label>
                  <input
                    type="text"
                    name="subject"
                    onChange={(e) => {
                      setSubject(e.target.value);
                    }}
                    className="appearance-none border rounded w-full py-2 px-3 text-white-700 leading-tight focus:outline-none focus:shadow-outline"
                  />
                  <textarea
                    className="appearance-none border rounded w-full py-2 px-3 text-white-700 leading-tight focus:outline-none focus:shadow-outline"
                    id="message"
                    placeholder="Enter your message"
                    name="message"
                  ></textarea>
                </div>
                <div className="flex items-center justify-center">
                  <button
                    className="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline"
                    type="submit"
                  ></button>
                </div>
              </form> */}
            </div>
          </section>
        </section>
      </main>
    </div>
  );
}
